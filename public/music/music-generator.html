<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Retro Music Generator</title>
		<style>
			body {
				font-family: 'Courier New', monospace;
				background: #000;
				color: #0f0;
				padding: 20px;
				max-width: 800px;
				margin: 0 auto;
			}
			h1 {
				text-align: center;
				border-bottom: 2px solid #0f0;
				padding-bottom: 10px;
			}
			.track {
				background: #111;
				border: 2px solid #0f0;
				padding: 15px;
				margin: 15px 0;
			}
			button {
				background: #0f0;
				color: #000;
				border: none;
				padding: 10px 20px;
				margin: 5px;
				cursor: pointer;
				font-family: 'Courier New', monospace;
				font-weight: bold;
			}
			button:hover {
				background: #0c0;
			}
			button:active {
				background: #090;
			}
			.info {
				color: #0a0;
				font-size: 12px;
				margin-top: 10px;
			}
		</style>
	</head>
	<body>
		<h1>üéµ RETRO RACING MUSIC GENERATOR üéµ</h1>

		<div class="track">
			<h2>Menu Music</h2>
			<p>Chill retro menu theme with arpeggiators</p>
			<button onclick="playMenu()">‚ñ∂ Play</button>
			<button onclick="stopAll()">‚èπ Stop</button>
			<div class="info">Looping ambient track for menus and garage</div>
		</div>

		<div class="track">
			<h2>Race Music</h2>
			<p>High-energy racing theme with driving bassline</p>
			<button onclick="playRace()">‚ñ∂ Play</button>
			<button onclick="stopAll()">‚èπ Stop</button>
			<div class="info">Fast-paced track for racing action</div>
		</div>

		<div class="track">
			<h2>Victory Music</h2>
			<p>Triumphant fanfare for winning races</p>
			<button onclick="playVictory()">‚ñ∂ Play</button>
			<button onclick="stopAll()">‚èπ Stop</button>
			<div class="info">Short victory jingle</div>
		</div>

		<div class="track">
			<h2>Defeat Music</h2>
			<p>Somber tune for race losses</p>
			<button onclick="playDefeat()">‚ñ∂ Play</button>
			<button onclick="stopAll()">‚èπ Stop</button>
			<div class="info">Short defeat sound</div>
		</div>

		<div class="info" style="margin-top: 30px; text-align: center">
			<p>‚ö†Ô∏è NOTE: To use these tracks in your game, you'll need to:</p>
			<p>1. Record these tracks using audio recording software</p>
			<p>2. Export as MP3/OGG files</p>
			<p>3. Place in public/music/ directory</p>
			<p>
				OR use royalty-free music from incompetech.com or
				freemusicarchive.org
			</p>
		</div>

		<script>
			let ctx = null;
			let currentNodes = [];

			function initAudio() {
				if (!ctx) {
					ctx = new (window.AudioContext ||
						window.webkitAudioContext)();
				}
				return ctx;
			}

			function stopAll() {
				currentNodes.forEach((node) => {
					try {
						if (node.stop) node.stop();
						if (node.disconnect) node.disconnect();
					} catch (e) {}
				});
				currentNodes = [];
			}

			function createOsc(freq, type = 'square', duration = 1) {
				const audioCtx = initAudio();
				const osc = audioCtx.createOscillator();
				const gain = audioCtx.createGain();

				osc.type = type;
				osc.frequency.value = freq;
				osc.connect(gain);
				gain.connect(audioCtx.destination);

				currentNodes.push(osc, gain);
				return { osc, gain };
			}

			function playNote(
				freq,
				duration,
				delay = 0,
				type = 'square',
				volume = 0.3
			) {
				const audioCtx = initAudio();
				const { osc, gain } = createOsc(freq, type);
				const now = audioCtx.currentTime + delay;

				gain.gain.setValueAtTime(0, now);
				gain.gain.linearRampToValueAtTime(volume, now + 0.01);
				gain.gain.exponentialRampToValueAtTime(0.01, now + duration);

				osc.start(now);
				osc.stop(now + duration);
			}

			function playMenu() {
				stopAll();
				const audioCtx = initAudio();

				// Arpeggio pattern (C major)
				const notes = [261.63, 329.63, 392.0, 523.25]; // C E G C
				const bassNotes = [130.81, 164.81, 196.0]; // C E G

				let time = 0;
				const beatDuration = 0.3;

				// Play for 8 bars
				for (let bar = 0; bar < 8; bar++) {
					for (let i = 0; i < notes.length; i++) {
						playNote(
							notes[i],
							beatDuration * 0.8,
							time,
							'square',
							0.15
						);
						time += beatDuration;
					}
					// Bass note every 4 beats
					playNote(
						bassNotes[bar % 3],
						beatDuration * 4,
						time - beatDuration * 4,
						'sine',
						0.2
					);
				}
			}

			function playRace() {
				stopAll();
				const audioCtx = initAudio();

				// Fast driving bassline
				const bassline = [130.81, 146.83, 164.81, 174.61]; // C D E F
				const melody = [523.25, 587.33, 659.25, 698.46, 783.99]; // C D E F G

				let time = 0;
				const beatDuration = 0.15; // Fast tempo

				// 16 bars of intense music
				for (let bar = 0; bar < 16; bar++) {
					// Driving bassline
					for (let i = 0; i < 4; i++) {
						playNote(
							bassline[i],
							beatDuration * 0.9,
							time,
							'sawtooth',
							0.25
						);
						time += beatDuration;
					}

					// Melody on top
					const melodyNote = melody[bar % melody.length];
					playNote(
						melodyNote,
						beatDuration * 2,
						time - beatDuration * 4,
						'square',
						0.15
					);

					// Add some percussion-like noise bursts
					if (bar % 2 === 0) {
						playNote(
							100,
							0.05,
							time - beatDuration * 4,
							'sawtooth',
							0.1
						);
					}
				}
			}

			function playVictory() {
				stopAll();

				// Triumphant ascending melody
				const notes = [
					261.63,
					329.63,
					392.0,
					523.25, // C E G C
					659.25,
					783.99,
					1046.5, // E G C
				];

				let time = 0;
				notes.forEach((note, i) => {
					playNote(note, 0.3, time, 'square', 0.2);
					if (i < 4) {
						playNote(note * 2, 0.3, time, 'sine', 0.1); // Harmony
					}
					time += 0.25;
				});

				// Final chord
				playNote(523.25, 1.0, time, 'square', 0.15); // C
				playNote(659.25, 1.0, time, 'square', 0.15); // E
				playNote(783.99, 1.0, time, 'square', 0.15); // G
			}

			function playDefeat() {
				stopAll();

				// Descending sad melody
				const notes = [
					392.0,
					349.23,
					329.63,
					293.66,
					261.63, // G F E D C
				];

				let time = 0;
				notes.forEach((note, i) => {
					playNote(note, 0.4, time, 'sine', 0.2);
					time += 0.3;
				});

				// Final low note
				playNote(130.81, 1.0, time, 'sine', 0.15);
			}
		</script>
	</body>
</html>
